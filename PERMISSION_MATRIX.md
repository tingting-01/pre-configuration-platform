# 权限矩阵快速参考表

## 一、核心权限矩阵

### 请求管理

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 创建请求 | ✅ | ✅ | ✅ |
| 查看请求 | 仅自己 | ✅ 所有 | ✅ 所有 |
| 编辑请求 | 仅自己 | ✅ 所有 | ✅ 所有 |
| 删除请求 | 仅自己 | 仅自己 | ✅ **任何** ⭐ |
| 批量删除 | 仅自己 | 仅自己 | ✅ **任何** ⭐ |
| 修改工作流 | ❌ | ✅ | ✅ |
| 分配请求 | ❌ | ✅ | ✅ |
| 导出请求 | 仅自己 | ✅ 所有 | ✅ 所有 |

### 用户管理

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 查看用户列表 | ❌ | ✅ | ✅ |
| 查看用户详情 | ❌ | ✅ | ✅ |
| 管理用户角色 | ❌ | ❌ | ❌（已禁用） |

### 模板管理

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 创建模板 | ✅ | ✅ | ✅ |
| 查看模板 | 公开或自己 | ✅ 所有 | ✅ 所有 |
| 编辑模板 | 仅自己 | 仅自己 | 仅自己 |
| 删除模板 | 仅自己 | 仅自己 | 仅自己 |
| 应用模板 | ✅ | ✅ | ✅ |

### 评论和活动

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 添加评论 | 仅自己创建的请求 | ✅ 所有 | ✅ 所有 |
| 查看评论 | 仅自己创建的请求 | ✅ 所有 | ✅ 所有 |
| 上传附件 | 仅自己创建的请求 | ✅ 所有 | ✅ 所有 |
| 查看历史 | 仅自己创建的请求 | ✅ 所有 | ✅ 所有 |

### 文件管理

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 上传文件 | ✅ | ✅ | ✅ |
| 下载文件 | 仅自己创建的请求 | ✅ 所有 | ✅ 所有 |

### 通知功能

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 查看通知 | ✅ | ✅ | ✅ |
| 清除通知 | ✅ | ✅ | ✅ |

---

## 二、前端功能权限

### Dashboard 页面

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| "New Requests" 筛选 | ❌ | ✅ | ✅ |
| "All Requests" 筛选 | ✅ | ✅ | ✅ |
| 搜索/高级搜索 | ✅ | ✅ | ✅ |
| 批量删除 | 仅自己 | 仅自己 | ✅ **任何** ⭐ |
| 修改工作流状态 | ❌ | ✅ | ✅ |
| 分配请求 | ❌ | ✅ | ✅ |

### Request Details 页面

| 功能 | user | rakwireless | admin |
|------|------|-------------|-------|
| 查看详情 | 仅自己 | ✅ 所有 | ✅ 所有 |
| 编辑请求 | 仅自己 | ✅ 所有 | ✅ 所有 |
| 导出请求 | 仅自己 | ✅ 所有 | ✅ 所有 |
| 评论功能 | 仅自己 | ✅ 所有 | ✅ 所有 |
| 历史记录 | 仅自己 | ✅ 所有 | ✅ 所有 |

---

## 三、API 端点权限

| API 端点 | 方法 | user | rakwireless | admin |
|---------|------|------|-------------|-------|
| `/api/requests` | GET | 仅自己 | ✅ 所有 | ✅ 所有 |
| `/api/requests/{id}` | GET | 仅自己 | ✅ 所有 | ✅ 所有 |
| `/api/requests` | POST | ✅ | ✅ | ✅ |
| `/api/requests/{id}` | PUT | 仅自己 | ✅ 所有 | ✅ 所有 |
| `/api/requests/{id}` | DELETE | 仅自己 | 仅自己 | ✅ **任何** ⭐ |
| `/api/requests/batch/delete` | POST | 仅自己 | 仅自己 | ✅ **任何** ⭐ |
| `/api/users` | GET | ❌ | ✅ | ✅ |
| `/api/users/{id}` | GET | ❌ | ✅ | ✅ |
| `/api/templates` | GET | 公开或自己 | ✅ 所有 | ✅ 所有 |
| `/api/templates` | POST | ✅ | ✅ | ✅ |
| `/api/templates/{id}` | DELETE | 仅自己 | 仅自己 | 仅自己 |
| `/api/requests/{id}/comments` | GET/POST | 仅自己创建的请求 | ✅ 所有 | ✅ 所有 |

---

## 四、权限说明

### 角色识别

- **user**: 默认角色，非 `@rakwireless.com` 邮箱
- **rakwireless**: 自动识别，`@rakwireless.com` 邮箱
- **admin**: 手动设置，默认账户：`admin@rakwireless.com` / `rakwireless`

### Admin 特殊权限

⭐ **唯一特殊权限**: 可以删除任何请求（包括他人创建的）

其他所有权限与 rakwireless 用户相同。

### 已禁用功能

- ❌ 用户角色管理（`PUT /api/users/{id}/role`）
- ❌ 查看所有用户信息（`GET /api/users/all`）
- ❌ 删除任何模板（只能删除自己创建的模板）

---

**快速参考**: 查看 `COMPLETE_PERMISSION_DOCUMENTATION.md` 获取详细说明

